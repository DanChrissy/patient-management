"use strict";(self.webpackChunkpatient_manage=self.webpackChunkpatient_manage||[]).push([[857],{43539:function(n,e,t){var r,o=t(30168),a=t(1413),i=t(45987),c=t(15751),s=t(80184),l=["title","disabled","customStyles","onClick"];e.Z=function(n){var e=n.title,t=n.disabled,r=n.customStyles,o=n.onClick,c=(0,i.Z)(n,l);return(0,s.jsx)(u,(0,a.Z)((0,a.Z)({type:"button",onClick:o,disabled:t,style:r},c),{},{children:e}))};var u=c.ZP.button(r||(r=(0,o.Z)(["\n    outline: none;\n    border: none;\n\n    width: auto;\n    padding: var(--space-12) var(--space-14);\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    font-family: 'DM Sans';\n    font-size: var(--font-14);\n    font-weight: normal;\n    font-size: normal;\n\n    color: var(--color-white);\n    background-color: var(--color-purple-800);\n    border-radius: 0.25rem;\n\n   cursor: pointer;\n\n   :disabled {\n       cursor: default;\n   }\n\n\n"])))},23063:function(n,e,t){var r,o,a,i,c=t(30168),s=t(70885),l=t(72791),u=t(15751),d=t(94936),p=t(81764),m=t(80184);e.Z=function(n){var e=n.title,t=n.customTitleStyles,r=n.customContentStyles,o=n.children,a=(0,l.useState)(!1),i=(0,s.Z)(a,2),c=i[0],u=i[1];function g(){u(!c)}return(0,m.jsxs)(f,{children:[(0,m.jsxs)(h,{isOpen:c,style:t,children:[(0,m.jsx)("span",{children:e}),c?(0,m.jsx)(d.Z,{className:"collapsible-icon",onClick:g}):(0,m.jsx)(p.Z,{className:"collapsible-icon",onClick:g})]}),c&&(0,m.jsx)(v,{style:r,children:o})]})};var f=u.ZP.div(r||(r=(0,c.Z)(["\n    width: auto;\n    min-width: 5rem;\n    display: flex;\n    flex-direction: column;\n"]))),h=u.ZP.div(o||(o=(0,c.Z)(["\n    width: auto;\n    height: 3rem;\n    padding: var(--space-12) var(--space-14);\n\n    background-color: var(--color-white);\n\n    border: 1px solid var(--color-gray-800);\n    border-radius: 0.25rem;\n    box-sizing: border-box;\n\n    ","\n\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    font-family: Inter;\n    font-size: var(--font-16);\n    line-height: 1rem;\n    font-weight: 500;\n    font-style: normal;\n    color: var(--color-gray-800);\n\n    .collapsible-icon {\n        cursor: pointer;\n    }\n\n"])),(function(n){return n.isOpen&&(0,u.iv)(a||(a=(0,c.Z)(["\n        border-bottom: 0;\n        border-bottom-left-radius: 0;\n        border-bottom-right-radius: 0;\n    "])))})),v=u.ZP.div(i||(i=(0,c.Z)(["\n    width: auto;\n    /* margin-top: var(--space-8); */\n    /* padding-bottom: var(--space-20); */\n\n    background: var(--color-white);\n\n    border: 1px solid var(--color-gray-800);\n    border-top: 0;\n\n    border-bottom-left-radius: 0.5rem;\n    border-bottom-right-radius: 0.5rem;\n"])))},49857:function(n,e,t){t.r(e),t.d(e,{default:function(){return N}});var r,o,a,i,c,s,l,u=t(30168),d=t(42982),p=t(15861),m=t(70885),f=t(87757),h=t.n(f),v=t(72791),g=t(15751),b=t(94275),x=t.n(b),y=(0,t(1592).Z)(v.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),w=t(80184),Z=function(n){var e=n.selected,t=void 0!==e&&e,r=n.customStyles,o=n.onClick;return(0,w.jsx)(k,{style:r,selected:t,onClick:o,children:t&&(0,w.jsx)(y,{className:"checkbox-icon"})})},k=g.ZP.div(r||(r=(0,u.Z)(["\n    height: 1rem;\n    width: 1rem;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    border: 1px solid var(--color-gray-600);\n    border-radius: 0.25rem;\n    background-color: var(--color-white);\n\n    cursor: pointer;\n\n    ","\n\n    .checkbox-icon {\n        height: 0.875rem;\n        width: 0.875rem;\n\n        color: var(--color-white);\n    }\n"])),(function(n){return n.selected&&(0,g.iv)(o||(o=(0,u.Z)(["\n        border-color: transparent;\n        background-color: var(--color-purple-800);\n    "])))})),j=t(23063),C=t(68181),P=t(763),S=t(43539),M=t(16030),A=t(83647),N=function(){var n=(0,M.v9)(A.PR),e=(0,v.useState)([]),t=(0,m.Z)(e,2),r=t[0],o=t[1],a=(0,v.useState)([]),i=(0,m.Z)(a,2),c=i[0],s=i[1],l=(0,v.useState)(!1),u=(0,m.Z)(l,2),f=u[0],g=u[1];function b(n){return y.apply(this,arguments)}function y(){return y=(0,p.Z)(h().mark((function n(e){var t,r;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=new(x().Query)("_User"),r=e.map(function(){var n=(0,p.Z)(h().mark((function n(e){var r,o;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.get(e.get("patient").id);case 2:return r=n.sent,o={id:e.id,date:e.get("date"),patient:"".concat(r.get("firstName")," ").concat(r.get("lastName"))},n.abrupt("return",o);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Promise.all(r).then((function(n){R(n)})).catch((function(n){R([])})).finally((function(){return g(!1)}));case 3:case"end":return n.stop()}}),n)}))),y.apply(this,arguments)}function k(){return N.apply(this,arguments)}function N(){return(N=(0,p.Z)(h().mark((function e(){var t,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),s([]),t=new(x().Query)("Appointment"),r=new(x().Query)("_User"),e.prev=4,e.next=7,r.get(n.id);case 7:return o=e.sent,t.equalTo("doctor",o),t.equalTo("status","pending"),e.prev=10,e.next=13,t.find();case 13:b(e.sent),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),g(!1);case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(4),g(!1);case 25:case"end":return e.stop()}}),e,null,[[4,22],[10,17]])})))).apply(this,arguments)}function R(n){if(n.length>0){var e=(0,P.groupBy)(n,(function(n){return(0,C.Z)(new Date(n.date),"MMMM")})),t=Object.keys(e).map((function(n){return{groupedMonth:n,groupAppointments:e[n]}}));o(t)}else o([])}function U(n){return q.apply(this,arguments)}function q(){return q=(0,p.Z)(h().mark((function n(e){var t;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("Selected appointments:",c),t=c.map(function(){var n=(0,p.Z)(h().mark((function n(t){var r,o;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new(x().Query)("Appointment"),n.next=3,r.get(t);case 3:(o=n.sent).set("status",e),o.save();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Promise.all(t).then((function(n){alert("Appointments status updated:"),k()})).catch((function(n){alert("Unable to update status"),console.log("Appointments could not be updatesd")}));case 3:case"end":return n.stop()}}),n)}))),q.apply(this,arguments)}return(0,v.useEffect)((function(){k()}),[]),(0,w.jsx)(D,{children:(0,w.jsxs)(Q,{children:[(0,w.jsxs)(_,{children:[(0,w.jsx)("p",{className:"section-title",children:"Pending Appointments"}),!f&&(0,w.jsx)(L,{children:r.map((function(n,e){return(0,w.jsx)("div",{className:"grouped-app",children:(0,w.jsx)(j.Z,{title:n.groupedMonth,customTitleStyles:z,customContentStyles:T,children:n.groupAppointments.map((function(n,e){return(0,w.jsxs)("div",{className:"checked-item",children:[(0,w.jsx)(Z,{selected:c.includes(n.id),onClick:function(){return function(n){var e=c;e=c.includes(n)?e.filter((function(e){return e!==n})):[].concat((0,d.Z)(e),[n]),s(e)}(n.id)}}),(0,w.jsxs)("span",{className:"checked-item-text",children:[n.patient," - ",(0,C.Z)(new Date(n.date),"MMMM d, yyyy")]})]},"pending-appointments-".concat(e))}))})},"pending-group-".concat(e))}))})]}),r.length>0&&(0,w.jsxs)(O,{children:[(0,w.jsx)(S.Z,{title:"Approve Appointments",onClick:function(){return U("approved")}}),(0,w.jsx)(S.Z,{title:"Reject Appointments",onClick:function(){return U("rejected")}})]})]})})},z={border:"none",width:"16rem",borderBottom:"1px solid var(--color-purple-700)",borderRadius:0},T={border:"none",width:"max-content",marginLeft:"var(--space-16)",marginTop:"var(--space-10)"},D=g.ZP.div(a||(a=(0,u.Z)(["\n    height: 100vh;\n    width: 100vw;\n\n    margin: 0;\n    padding: 0;\n"]))),Q=g.ZP.div(i||(i=(0,u.Z)(["\n    width: calc(100% - var(--space-48));\n    height: calc(100% - var(--space-48));\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    padding: var(--space-24);\n\n"]))),_=g.ZP.div(c||(c=(0,u.Z)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n\n    .section-title {\n        margin-bottom: var(--space-48);\n        font-family: 'DM Sans';\n        font-size: var(--font-24);\n        font-weight: 500;\n        font-style: normal;\n        color: var(--color-gray-800);\n        text-align: center;\n    }\n\n"]))),L=g.ZP.div(s||(s=(0,u.Z)(["\n    margin-bottom: var(--space-14);\n    :last-of-type{ margin-bottom: 0; }\n\n    display: flex;\n    flex-direction: row;\n\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(16rem, 1fr));\n    grid-row-gap: var(--space-14);\n    grid-column-gap: var(--space-8);\n\n    .grouped-app {\n        /* margin-bottom: var(--space-18);\n        :last-of-type{ margin-bottom: 0; } */\n    }\n\n    .checked-item {\n        display: flex;\n        align-items: center;\n\n        margin-bottom: var(--space-10);\n        :last-of-type { margin-bottom: 0; }\n    }\n\n    .checked-item-text {\n        margin-left: var(--space-12);\n    }\n"]))),O=g.ZP.div(l||(l=(0,u.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    flex-wrap: wrap;\n\n    margin-top: var(--space-32);\n\n    button {\n        width: 11.5rem;\n        height: 2.75rem;\n        :hover {\n            background-color: var(--color-white);\n            color: var(--color-black);\n        }\n        :first-of-type {\n            margin-right: var(--space-14);\n            :hover {\n                border: 2px solid var(--color-purple-700);\n            }\n        }\n        :last-of-type {\n            background-color: var(--color-red-600);\n\n            :hover {\n                background-color: var(--color-white);\n                border: 2px solid var(--color-red-600);\n            }\n\n        }\n    }\n"])))}}]);
//# sourceMappingURL=857.c7400d15.chunk.js.map